<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-85788349-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-85788349-2');
    </script>
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "8d0y8ip2in");
    </script>
    <meta charset="utf-8"/>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <base href="/">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,900,700,400italic" rel="stylesheet">
    <title>Serenity/JS 2.x Migration Guide | Serenity/JS</title>
    <meta property="og:title" content="Serenity/JS 2.x Migration Guide | Serenity/JS"/>
    <meta property="og:description" content="Full-stack acceptance testing with Serenity/JS"/>
    <meta property="og:image" content="https://serenity-js.org/images/serenity-js-banner.png"/>
    <meta property="og:url" content="https://serenity-js.org/handbook/integration/serenity-2-migration-guide.html"/>
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="manifest" href="/icons/site.webmanifest">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="/icons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="/css/charming-pro-serenity-js.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/pixeden-stroke-7-icon@1.2.3/pe-icon-7-stroke/dist/pe-icon-7-stroke.min.css"
          integrity="sha256-AJfZWudfDWpFpIZ3USExGYDGwsYz47IgfEQCiGTm4wQ=" crossorigin="anonymous">
</head>
<body>

<div id="top"
        class="block block-dark block-bb bg-gradient-accent-2 p-0 d-print-none">
    <div class="container">
        <nav id="web-nav" class="web-nav web-nav-light">
            <header>
                <a href="/" class="serenity-js-logo">
                    <svg width="190px" height="42px" viewBox="0 0 1077 243" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;">
                        <path class="logo-accent" d="M295.133,157.626l22.342,0c1.571,12.567 6.633,23.04 27.753,23.04c13.789,0 23.563,-7.68 23.563,-19.2c0,-11.52 -5.76,-15.884 -26.007,-19.2c-29.847,-4.015 -43.985,-13.091 -43.985,-36.48c0,-20.422 17.454,-35.782 43.461,-35.782c26.881,0 42.938,12.219 45.382,36.131l-21.294,0c-2.27,-13.091 -9.775,-18.676 -24.088,-18.676c-14.138,0 -21.469,6.807 -21.469,16.407c0,10.123 4.19,15.186 25.833,18.327c29.323,4.015 44.509,12.393 44.509,37.353c0,21.643 -18.327,38.574 -45.905,38.574c-34.036,0 -48.35,-16.931 -50.095,-40.494" style="fill-rule:nonzero;"/>
                        <path class="logo-accent" d="M472.468,141.219c-1.048,-15.709 -9.077,-22.691 -22.168,-22.691c-12.741,0 -21.294,8.552 -23.389,22.691l45.557,0Zm-67.55,10.473l0,-1.397c0,-28.276 19.375,-47.127 45.382,-47.127c22.691,0 43.113,13.44 43.113,46.08l0,6.109l-66.851,0c0.698,17.28 9.426,27.054 25.135,27.054c12.742,0 19.375,-5.061 20.945,-13.963l20.422,0c-2.967,19.2 -18.502,29.672 -41.891,29.672c-26.88,0 -46.255,-17.629 -46.255,-46.428" style="fill-rule:nonzero;"/>
                        <path class="logo-base"   d="M513.481,105.088l14.487,0l0,16.407c5.761,-10.298 13.616,-17.454 30.023,-17.978l0,13.615c-18.327,0.872 -30.023,6.633 -30.023,29.148l0,50.095l-14.487,0l0,-91.287Z" style="fill-rule:nonzero;"/>
                        <path class="logo-base"   d="M637.754,141.917c-1.396,-18.851 -11.171,-26.356 -26.182,-26.356c-14.836,0 -24.785,10.124 -27.229,26.356l53.411,0Zm-68.945,9.774l0,-1.396c0,-27.578 17.629,-46.778 42.763,-46.778c21.12,0 41.019,12.742 41.019,45.381l0,4.713l-68.772,0c0.699,20.771 10.648,32.291 29.325,32.291c14.137,0 22.341,-5.236 24.261,-15.883l14.488,0c-3.143,18.327 -18.328,27.927 -38.924,27.927c-25.833,0 -44.16,-18.153 -44.16,-46.255" style="fill-rule:nonzero;"/>
                        <path class="logo-base"   d="M673.882,105.088l14.487,0l0,14.487c4.189,-8.552 14.313,-16.058 29.324,-16.058c18.85,0 32.116,10.299 32.116,36.829l0,56.029l-14.488,0l0,-57.076c0,-16.059 -6.806,-23.215 -21.468,-23.215c-13.441,0 -25.484,8.553 -25.484,24.96l0,55.331l-14.487,0l0,-91.287Z" style="fill-rule:nonzero;"/>
                        <path class="logo-base"   d="M772.733,105.088l14.486,0l0,91.287l-14.487,0l0,-91.287Zm-2.618,-28.626c0,-5.237 4.365,-9.6 9.601,-9.6c5.236,0 9.599,4.363 9.599,9.6c0,5.237 -4.363,9.6 -9.599,9.6c-5.236,0 -9.601,-4.363 -9.601,-9.6" style="fill-rule:nonzero;"/>
                        <path class="logo-base"   d="M819.16,173.51l0,-56.204l-13.091,0l0,-12.218l13.091,0l0,-20.77l14.487,0l0,20.77l21.294,0l0,12.218l-21.294,0l0,54.808c0,8.901 4.015,13.265 11.346,13.265c4.538,0 8.028,-0.698 11.171,-1.92l0,12.218c-2.968,1.047 -6.459,1.92 -12.394,1.92c-16.581,0 -24.61,-9.774 -24.61,-24.087" style="fill-rule:nonzero;"/>
                        <path class="logo-base"   d="M902.589,186.949l-35.782,-81.861l15.535,0l27.927,65.454l25.309,-65.454l14.836,0l-50.443,123.054l-14.662,0l17.28,-41.193Z" style="fill-rule:nonzero;"/>
                        <path class="logo-accent" d="M996.26,100.15l7.752,0l-22.728,69.537l-7.675,0l22.651,-69.537Z" style="fill-rule:nonzero;"/>
                        <path class="logo-accent" d="M1002.35,157.646l0,-7.826c1.882,0.752 3.763,1.353 6.924,1.353c4.891,0 8.053,-2.558 8.053,-9.181l0,-37.252l10.084,0l0,37.478c0,11.664 -6.698,17.008 -16.632,17.008c-4.44,0 -6.698,-0.678 -8.429,-1.58" style="fill-rule:nonzero;"/>
                        <path class="logo-accent" d="M1035.46,141.841l9.633,0c0.678,5.42 2.86,9.934 11.966,9.934c5.945,0 10.16,-3.311 10.16,-8.278c0,-4.967 -2.484,-6.847 -11.214,-8.277c-12.868,-1.733 -18.964,-5.645 -18.964,-15.729c0,-8.806 7.525,-15.427 18.738,-15.427c11.59,0 18.514,5.267 19.567,15.578l-9.181,0c-0.978,-5.645 -4.215,-8.053 -10.386,-8.053c-6.095,0 -9.256,2.934 -9.256,7.074c0,4.366 1.806,6.547 11.138,7.901c12.643,1.732 19.191,5.343 19.191,16.105c0,9.332 -7.903,16.633 -19.793,16.633c-14.675,0 -20.846,-7.301 -21.599,-17.461" style="fill-rule:nonzero;"/>
                        <path class="logo-accent" d="M152.636,121.232c0,17.344 -14.06,31.404 -31.404,31.404c-17.344,0 -31.405,-14.06 -31.405,-31.404c0,-17.344 14.061,-31.404 31.405,-31.404c17.344,0 31.404,14.06 31.404,31.404" style="fill-rule:nonzero;"/>
                        <path class="logo-base"   d="M230.534,68.726l-67.217,67.217l46.941,0c-7.045,42.781 -44.281,75.521 -89.026,75.521c-31.396,0 -59.086,-16.127 -75.255,-40.523l-22.286,22.287c22.081,29.866 57.547,49.236 97.541,49.236c66.955,0 121.232,-54.277 121.232,-121.232c0,-18.81 -4.284,-36.619 -11.93,-52.506m-198.328,37.796c7.045,-42.782 44.281,-75.522 89.026,-75.522c31.396,0 59.086,16.127 75.255,40.523l22.286,-22.286c-22.081,-29.867 -57.547,-49.237 -97.541,-49.237c-66.955,0 -121.232,54.278 -121.232,121.232c0,18.811 4.284,36.62 11.93,52.506l67.217,-67.216l-46.941,0Z" style="fill-rule:nonzero;"/>
                    </svg>
                </a>
        
                <a href="#!" class="web-nav-toggler">
                    <span class="fa fa-close"></span>
                    <span class="fa fa-bars"></span>
                </a>
            </header>
        
            <div class="web-nav-list">
                <a href="/handbook" class="web-nav-item">Handbook</a>
                <a href="/modules" class="web-nav-item">Modules</a>
                <a href="/changelog.html" class="web-nav-item">Changelog</a>
                <a href="/support.html" class="web-nav-item">Support</a>
                <a href="/community/sponsors.html" class="web-nav-item">Sponsors</a>
                <a href="https://twitter.com/SerenityJS" class="web-nav-item" title="Serenity/JS on Twitter">
                    <span class="d-block d-lg-none">@SerenityJS on Twitter</span><span class="fab fa-twitter d-none d-lg-inline"> </span>
                </a>
                <a href="https://www.youtube.com/channel/UC0RdeVPyjtJopVHvlLrXd1Q" class="web-nav-item" title="Serenity/JS on YouTube">
                    <span class="d-block d-lg-none">serenity-js on YouTube</span><span class="fab fa-youtube d-none d-lg-inline"> </span>
                </a>
                <a href="https://github.com/serenity-js" class="web-nav-item" title="Serenity/JS on GitHub">
                    <span class="d-block d-lg-none">Source code</span><span class="fab fa-github d-none d-lg-inline"> </span>
                </a>
            </div>
        
            <div id="web-nav-mobile-indicator"><!-- this signals to the javascript if the navigation is mobile or not --></div>
        </nav>
    </div>

    <div class="announcement" role="banner">
        ðŸ‘‹ CSS? XPath? Or data-test-id? Help make Serenity/JS selectors better by answering <strong><a href="https://forms.gle/CGebfBPwKJQHkXr69">3 short questions</a></strong>!
    </div>
</div>

<section id="handbook">
    <section>
        <div class="container">
            <div class="row">
                <aside id="sidebar" class="col-lg-3 col-md-12 d-print-none">
                    <nav class="toc navigation text-truncate" data-ice="nav">
                        <ul class="summary">
                        </ul>
                    </nav>
                </aside>

                <div class="col-lg-9 col-md-12">
                    <article class="content">
                        <nav class="article-tools">
                            <a href="https://github.com/serenity-js/serenity-js/edit/master/documentation/website/src/handbook/integration/serenity-2-migration-guide.md">
                                <i class="far fa-edit"></i> Edit on GitHub</a>
                        </nav>
                        <section class="github-markdown">
                            <html><head></head><body><h1 id="serenityjs-2x-migration-guide">Serenity/JS 2.x Migration Guide</h1>
<h2 id="introduction">Introduction</h2>
<p>This guide is designed for people that have built Serenity/JS 1.x projects and wish to upgrade to Serenity/JS 2.x. The upgrade path is relatively straightforward as the main classes (<a href="https://serenity-js.org/modules/core/class/src/screenplay/actor/Actor.ts~Actor.html">Actor</a>, 
<a href="https://serenity-js.org/modules/core/class/src/screenplay/Task.ts~Task.html">Task</a>, <a href="https://serenity-js.org/modules/core/class/src/screenplay/Interaction.ts~Interaction.html">Interaction</a> and <a href="https://serenity-js.org/modules/core/class/src/screenplay/Question.ts~Question.html">Question</a>) 
are backwardly compatible. </p>
<p>There are some <a href="https://github.com/jan-molak/serenity-js/tree/master/examples">example mini-projects within the Serenity/JS main repo</a> created in version 2.x format that demonstrate the major features for each supported framework. 
For instance there are Serenity/JS 2.x implementations of a <a href="https://github.com/serenity-js/serenity-js/tree/master/examples/calculator-app">calculator</a> or the <a href="https://github.com/serenity-js/serenity-js/tree/master/examples/protractor-jasmine-todomvc">popular todomvc</a> project.
There are also some separate repos that provide empty templates for <a href="https://github.com/serenity-js/serenity-js-cucumber-protractor-template">Protractor</a>, <a href="https://github.com/serenity-js/serenity-js-jasmine-protractor-template">Jasmine</a> and <a href="https://github.com/serenity-js/serenity-js-mocha-protractor-template">Mocha</a>.
However, it can sometimes be difficult to know how to apply patterns from example or empty projects into your existing project. </p>
<p>As with any major library or framework release, there are a number of breaking changes that will prevent your project from being immediately runnable upon changing to the new version. 
So this documentation attempts to provide straightforward distillation of likely changes that will be needed to get your project migrated. In fact this article was compiled by examining all changes that were made to a real project Serenity/JS 1.10.2 project in order to migrate it to 2.x!</p>
<p>The changes are laid out in the following sequence:</p>
<ol>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#introduction">Introduction</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#migrating-package-json">Migrating package.json</a></li>
</ol>
<ul>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#updating-dependencies">Updating dependencies</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#updating-scripts">Updating scripts</a></li>
</ul>
<ol start="3">
<li><a href="/handbook/integration/serenity-2-migration-guide.html##protractor-configuration-protractorconfjs">Protractor configuration (protractor.conf.js)</a></li>
</ol>
<ul>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#the-crew">The Crew</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#the-new-consolereporter">The new ConsoleReporter</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#runner-specific-configurations">Runner specific configurations</a><ul>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#mocha">Mocha</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#cucumber">Cucumber</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#jasmine">Jasmine</a></li>
</ul>
</li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#creating-a-dressing-room-for-the-actors">Creating a Dressing Room for the Actors</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#browser-synchronisation">Browser Synchronisation</a></li>
</ul>
<ol start="4">
<li><a href="/handbook/integration/serenity-2-migration-guide.html#source-file-changes">Source file changes</a></li>
</ol>
<ul>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#globally-replacing-imports">Globally replacing imports</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#target-argument-types">Target argument types</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#webelement-of-">WebElement.of()</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#changes-to-target-arguments">Changes to Target arguments</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#migration-of-target-to-webelement-resolution-code">Migration of Target to WebElement resolution code</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#migration-of-targets-that-return-multiple-webelements">Migration of Targets that return multiple WebElements</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#migrate-promiselike-to-promise">Migrate PromiseLike to Promise</a><ul>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#background">Background</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#how-to-migrate-promise-code">How to migrate Promise code</a></li>
</ul>
</li>
</ul>
<ol start="6">
<li><a href="/handbook/integration/serenity-2-migration-guide.html#migrating-activity-code">Migrating Activity code</a></li>
</ol>
<ul>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#migrating-step-annotations">Migrating @step annotations</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.md#simplifying-tasks-using-taskwhere">Simplifying Tasks using Task.where</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#alert-handling">Alert handling</a><ul>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#alert-related-imports">Alert related imports</a></li>
</ul>
</li>
</ul>
<ol start="7">
<li><a href="/handbook/integration/serenity-2-migration-guide.html#migrating-assertions">Migrating Assertions</a></li>
</ol>
<ul>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#chai">chai</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#migrating-see-if-to-ensure-that">Migrating See.if to Ensure.that</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#is-no-longer-is-">Is no longer Is :-)</a></li>
</ul>
<ol start="8">
<li><a href="/handbook/integration/serenity-2-migration-guide.html#migrating-questions">Migrating Questions</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#migrating-script-execution-tasks">Migrating Script Execution Tasks</a><ul>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#serenity-js-1-x-implementation-of-hide-task">Serenity/JS 1.x implementation of Hide Task</a></li>
<li><a href="/handbook/integration/serenity-2-migration-guide.html#serenity-js-2-0-implementation-of-hide-task">Serenity/JS 2.x implementation of Hide Task</a></li>
</ul>
</li>
</ol>
<h2 id="migrating-packagejson">Migrating package.json</h2>
<h3 id="updating-dependencies">Updating dependencies</h3>
<p>Various libraries are no longer needed. Here's a high-level summary of changes:</p>
<ul>
<li>Chai is no longer needed as it's been superseded by <code>@serenity-js/assertions</code> </li>
<li>mocha is not yet supported so if you used that in 1.x, you'll need to switch to jasmine. </li>
<li>serenity-cli has been replaced by <code>@serenity-js/serenity-bdd</code>.</li>
</ul>
<p>So remove all of these from your dependencies section:</p>
<pre class="language-javascript"><code class="language-javascript"> <span class="token string">"@types/chai"</span>
 <span class="token string">"@types/chai-as-promised"</span>
 <span class="token string">"@types/mocha"</span>
 <span class="token string">"chai"</span>
 <span class="token string">"chai-as-promised"</span>
 <span class="token string">"chai-smoothie"</span>
 <span class="token string">"mocha"</span><span class="token punctuation">,</span>
 <span class="token string">"serenity-cli"</span>
</code></pre>
<p>Now that Serenity/JS 2.x is officially released, versions can be set to "^2.0.0" in order to get the latest for this release:</p>
<pre class="language-javascript"><code class="language-javascript"> <span class="token string-property property">"@serenity-js/assertions"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span><span class="token punctuation">,</span>
 <span class="token string-property property">"@serenity-js/console-reporter"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span><span class="token punctuation">,</span>
 <span class="token string-property property">"@serenity-js/core"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span><span class="token punctuation">,</span>
 <span class="token string-property property">"@serenity-js/cucumber"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span><span class="token punctuation">,</span>
 <span class="token string-property property">"@serenity-js/jasmine"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span><span class="token punctuation">,</span>
 <span class="token string-property property">"@serenity-js/protractor"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span><span class="token punctuation">,</span>
 <span class="token string-property property">"@serenity-js/rest"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span><span class="token punctuation">,</span>
 <span class="token string-property property">"@serenity-js/serenity-bdd"</span><span class="token operator">:</span> <span class="token string">"^2.0.0"</span>
</code></pre>
<p>If you want to want to stay on a fixed version, use that instead. You can find out the latest available version by visiting the <a href="https://github.com/jan-molak/serenity-js/releases">releases page</a>.</p>
<p>You may have other dependencies such as express, jasmine, node, sinon, in your existing project, but you won't need to have these unless you need to use them directly. 
Adding the above Serenity/JS dependencies should bring all runtime dependencies across. If you do need them and you want to pick a compatible version, see the versions in the <a href="https://github.com/serenity-js/serenity-js-cucumber-protractor-template">Protractor</a>, <a href="https://github.com/serenity-js/serenity-js-jasmine-protractor-template">Jasmine</a> or <a href="https://github.com/serenity-js/serenity-js-mocha-protractor-template">Mocha</a> template repos.</p>
<h3 id="updating-scripts">Updating scripts</h3>
<p>If you have <code>--verbose</code> as an argument in your lint script, remove it as the version of tslint that you now have does not support this parameter. (verbose can now be supplied as a format but stylish is probably better):     </p>
<pre class="language-javascript"><code class="language-javascript"><span class="token string-property property">"lint"</span><span class="token operator">:</span> <span class="token string">"tslint --config ./tslint.json --project ./tsconfig.json --format stylish"</span><span class="token punctuation">,</span>
</code></pre>
<p>Any scripts that used to run <code>serenity update</code> or <code>webdriver-manager update</code>  should now be updated to <code>serenity-bdd update</code>. So for instance:</p>
<pre class="language-typescript"><code><span class="token string-property property">"postinstall"</span><span class="token operator">:</span> <span class="token string">"serenity-bdd update --ignoreSSL"</span><span class="token punctuation">,</span> 
</code></pre>
<p>For further information, please see <a href="https://serenity-js.org/modules/serenity-bdd">the modules section of the serenity/JS website</a>           </p>
<h2 id="protractor-configuration-protractorconfjs">Protractor configuration (protractor.conf.js)</h2>
<h3 id="the-crew">The Crew</h3>
<p>Previously you will have had a single import for crew as follows:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> crew <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"serenity-js/lib/stage_crew"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>But a new <code>@serenity-js/console-reporter</code> module has now superseded the experimental (and now deleted) <code>ConsoleReporter</code> class that used to ship with <code>@serenity-js/core</code>.</p>
<p>So replace your previous crew import sections with the following:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span>ConsoleReporter<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@serenity-js/console-reporter'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>ArtifactArchiver<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@serenity-js/core"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>Photographer<span class="token punctuation">,</span> TakePhotosOfInteractions<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@serenity-js/protractor'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>SerenityBDDReporter<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@serenity-js/serenity-bdd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Also remove whatever was in the <code>crew []</code> section in the <code>serenity</code> object as this all needs to be replaced.</p>
<p>Make the following changes in your config object so that it looks like this:</p>
<pre class="language-javascript"><code class="language-javascript">exports<span class="token punctuation">.</span>config <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">chromeDriver</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'chromedriver/lib/chromedriver'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>path<span class="token punctuation">,</span>
    <span class="token constant">SELENIUM_PROMISE_MANAGER</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">directConnect</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">allScriptsTimeout</span><span class="token operator">:</span> <span class="token number">11000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">framework</span><span class="token operator">:</span>      <span class="token string">'custom'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">frameworkPath</span><span class="token operator">:</span>  require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'@serenity-js/protractor/adapter'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">specs</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">'spec/*.spec.ts'</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">serenity</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">crew</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          ArtifactArchiver<span class="token punctuation">.</span><span class="token function">storingArtifactsAt</span><span class="token punctuation">(</span><span class="token string">"./target/site/serenity"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          Photographer<span class="token punctuation">.</span><span class="token function">whoWill</span><span class="token punctuation">(</span>TakePhotosOfInteractions<span class="token punctuation">)</span><span class="token punctuation">,</span>
          <span class="token keyword">new</span> <span class="token class-name">SerenityBDDReporter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          ConsoleReporter<span class="token punctuation">.</span><span class="token function">withDefaultColourSupport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// other Protractor config (see Runner specific configurations below)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="the-new-consolereporter">The new ConsoleReporter</h3>
<p>The new ConsoleReporter supports several colour themes, which you can choose by calling either of the following factory methods:</p>
<pre class="language-javascript"><code class="language-javascript">ConsoleReporter<span class="token punctuation">.</span><span class="token function">withDefaultColourSupport</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ConsoleReporter<span class="token punctuation">.</span><span class="token function">forMonochromaticTerminals</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ConsoleReporter<span class="token punctuation">.</span><span class="token function">forDarkTerminals</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ConsoleReporter<span class="token punctuation">.</span><span class="token function">forLightTerminals</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h3 id="runner-specific-configurations">Runner specific configurations</h3>
<h4 id="mocha">Mocha</h4>
<p>Note that Mocha is not useable yet with 2.x, so if you previously used mocha you'll need to switch to an alterntive runner for the time being. 
Jasmine is recommended as the switch to it should be trivial. There are very few differences between how mocha and jasmine specs now look, 
given that assertions for all runners will use the new <code>@serenity-js/assertions</code>, exposing a uniform <code>Ensure</code> API.
So if you previously used mocha then remove your <code>mochaOpts</code> section:</p>
<pre class="language-javascript"><code class="language-javascript"> <span class="token literal-property property">mochaOpts</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ui</span><span class="token operator">:</span> <span class="token string">"bdd"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">compiler</span><span class="token operator">:</span> <span class="token string">"ts:ts-node/register"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<h4 id="cucumber">Cucumber</h4>
<p>If you use Cucumber, you'll need a section similar to this: </p>
<pre class="language-javascript"><code class="language-javascript"> <span class="token literal-property property">cucumberOpts</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">require</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">'features/step_definitions/**/*.ts'</span><span class="token punctuation">,</span>
            <span class="token string">'features/support/*.ts'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token string-property property">'require-module'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'ts-node/register'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">tags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<p>Make sure you add a folder (e.g. support) and reference a setup.ts file this within the require array section where you can add any global configuration and setup (explained below)</p>
<h4 id="jasmine">Jasmine</h4>
<p>If you use Jasmine, you'll need a section similar to this:</p>
<pre class="language-javascript"><code class="language-javascript"> <span class="token literal-property property">jasmineNodeOpts</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">requires</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">"ts-node/register"</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">helpers</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">"spec/support/*.ts"</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<p>Make sure you add a folder (e.g. support) and reference a setup.ts file this within the require array section where you can add any global configuration and setup (explained in next section)</p>
<h3 id="changes-to-the-cast">Changes to the Cast</h3>
<p>If you had a <code>Cast</code> implementation that set up the default abilities on your actors like this in your 1.x project:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> protractor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"protractor"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> TakeNotes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"serenity-js/lib/screenplay"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Actor<span class="token punctuation">,</span> BrowseTheWeb<span class="token punctuation">,</span> Cast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"serenity-js/lib/screenplay-protractor"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Members</span> <span class="token keyword">implements</span> <span class="token class-name">Cast</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">actor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> Actor <span class="token punctuation">{</span>
        <span class="token keyword">const</span> notepad <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> Actor<span class="token punctuation">.</span><span class="token function">named</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">whoCan</span><span class="token punctuation">(</span>BrowseTheWeb<span class="token punctuation">.</span><span class="token function">using</span><span class="token punctuation">(</span>protractor<span class="token punctuation">.</span>browser<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">whoCan</span><span class="token punctuation">(</span>TakeNotes<span class="token punctuation">.</span><span class="token function">using</span><span class="token punctuation">(</span>notepad<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Then this will now need to be replaced by a version 2.x equivalent:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Actor<span class="token punctuation">,</span> Cast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/core"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowseTheWeb <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/protractor"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> protractor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"protractor"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Actors</span> <span class="token keyword">implements</span> <span class="token class-name">Cast</span> <span class="token punctuation">{</span>
  <span class="token function">prepare</span><span class="token punctuation">(</span>actor<span class="token operator">:</span> Actor<span class="token punctuation">)</span><span class="token operator">:</span> Actor <span class="token punctuation">{</span>
    <span class="token keyword">return</span> actor<span class="token punctuation">.</span><span class="token function">whoCan</span><span class="token punctuation">(</span>
      BrowseTheWeb<span class="token punctuation">.</span><span class="token function">using</span><span class="token punctuation">(</span>protractor<span class="token punctuation">.</span>browser<span class="token punctuation">)</span><span class="token punctuation">,</span>
      TakeNotes<span class="token punctuation">.</span><span class="token function">usingAnEmptyNotepad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Your Cast may configure different abilities, if for example you are using a local HTTP server or calling an API:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Actor<span class="token punctuation">,</span> Cast <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@serenity-js/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ManageALocalServer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@serenity-js/local-server'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CallAnApi <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@serenity-js/rest'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> requestHandler <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@serenity-js-examples/calculator-app'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Actors</span> <span class="token keyword">implements</span> <span class="token class-name">Cast</span> <span class="token punctuation">{</span>
    <span class="token function">prepare</span><span class="token punctuation">(</span>actor<span class="token operator">:</span> Actor<span class="token punctuation">)</span><span class="token operator">:</span> Actor <span class="token punctuation">{</span>
        <span class="token keyword">return</span> actor<span class="token punctuation">.</span><span class="token function">whoCan</span><span class="token punctuation">(</span>
            ManageALocalServer<span class="token punctuation">.</span><span class="token function">runningAHttpListener</span><span class="token punctuation">(</span>requestHandler<span class="token punctuation">)</span><span class="token punctuation">,</span>
            CallAnApi<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token string">'http://localhost'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The above file will need to be placed in the <code>support</code> location specified for your test runner. See previous test runner sections where the specifics of each are explained.</p>
<p>If you want to perform global setup for all of your features, you can create a file e.g. called <code>configure_cast.ts</code> containing the following and place in the <code>support</code> location specified for your test runner:</p>
<p>For Jasmine: </p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> engage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@serenity-js/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Actors <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../screenplay/actors"</span><span class="token punctuation">;</span>

<span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">engage</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Actors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>For Cucumber: </p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> engage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@serenity-js/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Actors <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../screenplay/actors"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Before <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'cucumber'</span><span class="token punctuation">;</span>

<span class="token function">Before</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">engage</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Actors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Alternatively, this can be added at the top of your test(s) if you don't wish to apply this configuration globally.</p>
<h3 id="browser-synchronisation">Browser Synchronisation</h3>
<p>If your Serenity/JS project is testing a non-angular site you may have an <code>onPrepare</code> section in your protractor.config that contains the following:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function-variable function">onPrepare</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    browser<span class="token punctuation">.</span>ignoreSynchronization <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<p>If this is the case you will need to change this to the new syntax as follows:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function-variable function">onPrepare</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    browser<span class="token punctuation">.</span><span class="token function">waitForAngularEnabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<p>For more information on this topic, <a href="http://www.protractortest.org/#/api?view=ProtractorBrowser.prototype.waitForAngularEnabled">see the docs</a></p>
<h2 id="source-file-changes">Source file changes</h2>
<h3 id="globally-replacing-imports">Globally replacing imports</h3>
<p>If your project contains a large number of source files, quite a bit of time might need to be spent changing imports from the 1.x package structure to the 2.x equivalents. 
If you tackle this on a per-file basis, the easiest approach might be to delete any invalid imports from the top of the source file, and allow your IDE to auto-detect and apply the correct imports. 
However, this can get tedious very quickly as you'll find yourself repeating the same import process on many files. </p>
<p>The table below therefore itemises some common import changes that you are likely to need and you can use the "replace in path" function in your IDE to quickly make these changes across all of your sources files. </p>
<table>
<thead>
<tr>
<th>from</th>
<th>to</th>
</tr>
</thead>
<tbody><tr>
<td>serenity-js/lib/serenity-protractor</td>
<td>@serenity-js/protractor</td>
</tr>
<tr>
<td>serenity-js/lib/screenplay-protractor</td>
<td>@serenity-js/protractor</td>
</tr>
<tr>
<td>serenity-js/protractor</td>
<td>@serenity-js/protractor</td>
</tr>
<tr>
<td>serenity-js/lib/screenplay</td>
<td>@serenity-js/core</td>
</tr>
<tr>
<td>@serenity-js/core/lib/screenplay</td>
<td>@serenity-js/core</td>
</tr>
</tbody></table>
<h3 id="changes-to-target-arguments">Changes to Target arguments</h3>
<h4 id="target-argument-types">Target argument types</h4>
<p>It's quite likely that you'll have written some custom <code>Activity</code> classes in your project where a <code>Target</code> has been passed as an argument - for instance in the constructor:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">target</span><span class="token operator">:</span> Target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre>
<p>In the task you are likely to be passing the target to a built-in task like <code>Click.on(this.target))</code>. If this is the case you will now find that there is a compilation error on <code>Click</code> as <code>Target</code> is now passed using a different type.
So, any place that you used to pass Target as a type will now need to be changed to a union type: <code>Question&lt;ElementFinder&gt; | ElementFinder</code>. So now your constructor will look like this: </p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">target</span><span class="token operator">:</span> Question<span class="token operator">&lt;</span>ElementFinder<span class="token operator">&gt;</span> <span class="token operator">|</span> ElementFinder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre>
<p>This will need additional imports to added as follows:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Question <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/core"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ElementFinder <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"protractor"</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="webelementof">WebElement.of()</h4>
<p>In Serenity/JS 1.x <code>WebElement.of()</code> could be used to wrap a <code>Target</code> in order to return a <code>WebElement</code> but this is no longer valid syntax and should be replaced with <code>answeredby()</code> as explained in the next section. </p>
<h4 id="migration-of-target-to-webelement-resolution-code">Migration of Target to WebElement resolution code</h4>
<p>In Serenity/JS 1.x, a <code>Target</code> was resolved to a <code>WebElement</code> by means of the <code>locate</code> method on the <code>BrowseTheWeb</code> ability. 
For instance it was common place to see <code>BrowseTheWeb.as(actor).locate(this.target)</code> in a <code>Question</code>. 
However this approach will no longer work because <code>locate()</code> now takes a <code>Locator</code> type, so passing anything other than this type will result in an <code>Invalid Locator</code> run time error.  </p>
<p>All areas of your 1.x code that use the above method of <code>Target</code> resolution will need to be migrated to call the <code>answeredBy</code> method on the the <code>ElementFinder</code>.
This approach is perhaps better demonstrated by means of a simple example <code>Question</code> called <code>CheckedValue</code> which takes a <code>Target</code> as an argument and in the <code>answeredBy</code> method the Target is resolved to a WebElement
 and the <code>isSelected()</code> value is resolved from it. The code for <code>CheckedValue</code> is now shown using both Serenity/JS 1.x and Serenity/JS 2.x implementations:</p>
<h5 id="serenityjs-1x-implementation-of-checkedvalue-question">Serenity/JS 1.x implementation of CheckedValue Question</h5>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> AnswersQuestions<span class="token punctuation">,</span> Question<span class="token punctuation">,</span> UsesAbilities <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/core/lib/screenplay"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowseTheWeb<span class="token punctuation">,</span> Target <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/protractor"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CheckedValue</span> <span class="token keyword">implements</span> <span class="token class-name">Question</span><span class="token operator">&lt;</span>Promise<span class="token operator">&lt;</span>boolean<span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token function-variable function">of</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">target</span><span class="token operator">:</span> Target</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">CheckedValue</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>            

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">target</span><span class="token operator">:</span> Target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                              <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">answeredBy</span><span class="token punctuation">(</span>actor<span class="token operator">:</span> UsesAbilities<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> BrowseTheWeb<span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>actor<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">locate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isSelected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">the checked value of </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>In the example above:</p>
<ol>
<li>the <code>Target</code> was passed in the constructor.</li>
<li>the <code>BrowseTheWeb</code> ability was used to resolve a <code>WebElement</code> by passing the <code>Target</code> to the <code>locate</code> method.</li>
<li><code>isSelected()</code> method is called on the <code>WebElement</code>.</li>
</ol>
<h5 id="serenityjs-2x-implementation-of-checkedvalue-question">Serenity/JS 2.x implementation of CheckedValue Question</h5>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> AnswersQuestions<span class="token punctuation">,</span> Question<span class="token punctuation">,</span> UsesAbilities <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/core/lib/screenplay"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> promiseOf <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/protractor/lib/promiseOf"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ElementFinder <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"protractor"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">CheckedValue</span> <span class="token keyword">implements</span> <span class="token class-name">Question</span><span class="token operator">&lt;</span>Promise<span class="token operator">&lt;</span>boolean<span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> <span class="token function-variable function">of</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">target</span><span class="token operator">:</span> Question<span class="token operator">&lt;</span>ElementFinder<span class="token operator">&gt;</span> <span class="token operator">|</span> ElementFinder</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">CheckedValue</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">target</span><span class="token operator">:</span> Question<span class="token operator">&lt;</span>ElementFinder<span class="token operator">&gt;</span> <span class="token operator">|</span> ElementFinder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">answeredBy</span><span class="token punctuation">(</span>actor<span class="token operator">:</span> UsesAbilities <span class="token operator">&amp;</span> AnswersQuestions<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span> <span class="token punctuation">{</span>     
    <span class="token keyword">return</span> <span class="token function">promiseOf</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">answeredBy</span><span class="token punctuation">(</span>actor<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isSelected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">the checked value of </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>In the example above:</p>
<ol>
<li><code>Question&lt;ElementFinder&gt; | ElementFinder</code> is now passed in the constructor.</li>
<li><code>answeredBy</code> method is called on the the <code>ElementFinder</code> which returns a <code>WebElement</code>. </li>
<li><code>isSelected()</code> method is called on the <code>WebElement</code>. </li>
<li>Note also that <code>promiseOf</code> is used as a wrapper in order to ensure that a native <code>Promise</code> is returned as described in <a href="/handbook/integration/serenity-2-migration-guide.html#migrate-promiselike-to-promise">Migrate PromiseLike to Promise</a>.</li>
</ol>
<p>Note that if you are now invoking the <code>answeredBy()</code> on the <code>ElementFinder</code> when you werent in the 1.x version of your code, 
the ability <code>&amp; AnswersQuestions</code> must be added into the Question <code>answeredBy()</code> method signature, otherwise there will be a compilation error on the <code>ElementFinder</code> <code>answeredBy()</code>.</p>
<h4 id="migration-of-targets-that-return-multiple-webelements">Migration of Targets that return multiple WebElements</h4>
<p>In Serenity/JS 1.x, a <code>Target</code> could be resolved to a <code>WebElement[]</code> array by means of the <code>locateAll</code> method on the <code>BrowseTheWeb</code> ability. 
For instance it was common place to see <code>BrowseTheWeb.as(actor).locateAll(this.target)</code> in a <code>Question</code> or <code>Activity</code>.</p>
<p>As described in <a href="/handbook/integration/serenity-2-migration-guide.html#migration-of-target-to-webelement-resolution-code">Migration of Target to WebElement resolution code</a> above, this approach will no longer work because <code>locateAll()</code> now takes a <code>Locator</code> type, so passing anything other than this type will result in an <code>Invalid Locator</code> run time error.</p>
<p>All areas of your 1.x code that use the <code>locateAll()</code> method of <code>Target</code> resolution will now need to:</p>
<ul>
<li>Define a <code>TargetElements</code> object rather than <code>TargetElement</code> as part of your page definition. </li>
<li>call the <code>answeredBy</code> method on the <code>TargetElements</code> using the form: <code>&lt;TargetElements&gt;.answeredBy(actor)</code>. This will return a <code>WebElement[]</code> array which you can then transform, interact with and/or return values from.</li>
</ul>
<p>Note that the <code>TargetElements</code>, is new to Serenity/JS 2.x. An object of this type is created by calling the <code>all()</code> method on <code>Target</code> in contrast to the historically used <code>the()</code> method. For instance:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token literal-property property">bookTitles</span><span class="token operator">:</span> TargetElements <span class="token operator">=</span> Target<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">"book titles"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">located</span><span class="token punctuation">(</span>by<span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token string">"book-title"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Here is an example <code>answeredBy()</code> method body of a <code>Question</code> showing how <code>TargetElements</code> can be resolved to a <code>WebElement[]</code> array and then filtered and mapped in order to extract the element text:  </p>
<pre class="language-javascript"><code class="language-javascript">   <span class="token function">answeredBy</span><span class="token punctuation">(</span>actor<span class="token operator">:</span> AnswersQuestions <span class="token operator">&amp;</span> UsesAbilities<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
     <span class="token keyword">const</span> <span class="token literal-property property">bookTitles</span><span class="token operator">:</span> TargetElements <span class="token operator">=</span> Target<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">"book titles"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">located</span><span class="token punctuation">(</span>by<span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token string">"book-title"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token function">promiseOf</span><span class="token punctuation">(</span>bookTitles<span class="token punctuation">.</span><span class="token function">answeredBy</span><span class="token punctuation">(</span>actor<span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">option</span> <span class="token operator">=&gt;</span> option<span class="token punctuation">.</span><span class="token function">isSelected</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
       <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">values</span> <span class="token operator">=&gt;</span> values<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
</code></pre>
<h3 id="migrate-promiselike-to-promise">Migrate PromiseLike to Promise</h3>
<h4 id="background">Background</h4>
<p>Webdriver-js has historically used its own promise manager accessed by means of <a href="http://www.protractortest.org/#/control-flow">controlflow</a>, but this has been a complex component to maintain given that native support for <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promises</a> is now part of <a href="https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_-_ECMAScript_2015">ES6</a>. 
The selenium / webdriver project is now moving towards Native Promise support with complete migration targeted for Selenium 4 and Protractor 6.</p>
<p>Because controlflow promise chains do not return true promises, they return data via the <code>PromiseLike</code> interface which returns only a basic <a href="https://promisesaplus.com/#point-7">thenable</a> object containing the <code>then</code> method.</p>
<p>However, <code>Promise</code> also implements a <code>catch</code> method enabling better structured and documented error handling to be implemented, combined with superior flow control in the event of exceptions thrown within a promise chain. 
For example, you could use the <code>catch</code> method to implement a retry of your question in the event of a specific webdriver exception such as <code>StaleElementReferenceError</code> condition as follows:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">answeredBy</span><span class="token punctuation">(</span>actor<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result<span class="token punctuation">,</span> rowIndex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">doSomething</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> rowIndex<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token function">doSomethingElse</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token function">doAfinalThing</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">"StaleElementReferenceError"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">answeredBy</span><span class="token punctuation">(</span>actor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>
</code></pre>
<p>Previously error handling would have to be implemented by passing the error handling function as the second <code>onRejected</code> argument <code>then</code> which is far less obvious to someone maintaining or debugging the code. </p>
<h4 id="how-to-migrate-promise-code">How to migrate Promise code</h4>
<p>As a result of the above shift, much of Serenity/JS 2.x has now also migrated from <code>PromiseLike&lt;T&gt;</code> to <code>Promise&lt;T&gt;</code> return types, so it's best that you also follow suit with your own project as a large number of compilation errors will likely be cured by doing this.
The first step of the process is to perform a global replacement of <code>PromiseLike</code> to <code>Promise</code> in your code. No changing of imports is required given that both of these types are part of the javascript namespace.</p>
<p>Once you have done this, You may find that some of your <code>answeredBy</code> methods on your <code>Question</code> types , now fail to compile due to the following error <code>Error:(x, y) TS2739: Type 'Promise&lt;boolean&gt;' is missing the following properties from type 'Promise&lt;boolean&gt;': [Symbol.toStringTag], finally</code>:
For example in the <code>UploadError Question</code> below <code>WalksTargets.uploadResultSummary</code> is a <code>TargetElement</code>, however this will not compile because any method on WebElement returns a 
webdriver promise <code>wdpromise.Promise</code> which is not the same as a native <code>Promise</code>:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> AnswersQuestions<span class="token punctuation">,</span> Question<span class="token punctuation">,</span> UsesAbilities <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/core"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> WalksTargets <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../ui/ramblers/walksTargets"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">UploadError</span> <span class="token keyword">implements</span> <span class="token class-name">Question</span><span class="token operator">&lt;</span>Promise<span class="token operator">&lt;</span>boolean<span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">static</span> <span class="token function-variable function">displayed</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">UploadError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">"walk upload error is showing"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">answeredBy</span><span class="token punctuation">(</span>actor<span class="token operator">:</span> AnswersQuestions <span class="token operator">&amp;</span> UsesAbilities<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> WalksTargets<span class="token punctuation">.</span>uploadResultSummary<span class="token punctuation">.</span><span class="token function">answeredBy</span><span class="token punctuation">(</span>actor<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
<p>So to get over this, you will need to wrap the returned statement in <code>promiseOf</code>. This function resolves the <code>wdpromise.Promise</code>, then returns that value in a new native Promise. 
So, to get the code to compile it will now look like this: </p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> AnswersQuestions<span class="token punctuation">,</span> Question<span class="token punctuation">,</span> UsesAbilities <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/core"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> promiseOf <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/protractor/lib/promiseOf"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> WalksTargets <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"../../ui/ramblers/walksTargets"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">UploadError</span> <span class="token keyword">implements</span> <span class="token class-name">Question</span><span class="token operator">&lt;</span>Promise<span class="token operator">&lt;</span>boolean<span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">static</span> <span class="token function-variable function">displayed</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">UploadError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">"walk upload error is showing"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">answeredBy</span><span class="token punctuation">(</span>actor<span class="token operator">:</span> AnswersQuestions <span class="token operator">&amp;</span> UsesAbilities<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">promiseOf</span><span class="token punctuation">(</span>WalksTargets<span class="token punctuation">.</span>uploadResultSummary<span class="token punctuation">.</span><span class="token function">answeredBy</span><span class="token punctuation">(</span>actor<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
<p>If you are still having compilation problems after doing the above, then you will need to provide the Typescript compiler some help that this method is fine by adding <code>as Promise&lt;boolean&gt;</code> (or whatever the return type is from your <code>Question</code>) to the end of the return statement.
If your method returns a more complex domain type e.g. <code>Promise&lt;TradeSummary[]&gt;</code> then adding <code>as Promise&lt;TradeSummary[]&gt;</code> may still not work. If this is the case 
then try adding <code>as Promise&lt;any&gt;</code> instead to see whether your code now compiles. This is obviously not ideal as you are essentially removing type-safety from your code, but you can at least see whether the method now compiles, or another problem area is highlighted. </p>
<h2 id="migrating-activity-code">Migrating Activity code</h2>
<h3 id="migrating-step-annotations">Migrating @step annotations</h3>
<p>It's quite possible that you have classes in your 1.x project that have <code>@step</code> annotations. An example <code>Task</code> is as shown in <code>(1)</code> below which disables Angular synchronisation and then opens a supplied <code>url</code>: </p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">NavigateToNonAngular</span> <span class="token keyword">implements</span> <span class="token class-name">Task</span> <span class="token punctuation">{</span>

    <span class="token keyword">static</span> <span class="token function">url</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">url</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">NavigateToNonAngular</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    @<span class="token function">step</span><span class="token punctuation">(</span><span class="token string">"{0} actor navigates to #url"</span><span class="token punctuation">)</span>                              <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token function">performAs</span><span class="token punctuation">(</span>actor<span class="token operator">:</span> PerformsTasks<span class="token punctuation">)</span><span class="token operator">:</span> PromiseLike<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> actor<span class="token punctuation">.</span><span class="token function">attemptsTo</span><span class="token punctuation">(</span>
                UseAngular<span class="token punctuation">.</span><span class="token function">disableSynchronisation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                Open<span class="token punctuation">.</span><span class="token function">browserOn</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">url</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>If you have used <code>@step</code> annotations as in the above example, you will now have to re-implement them with an equivalent <code>toString()</code> method as <code>@step</code> has been removed in version 2.x. 
An equivalent example of the <code>toString()</code> method for the above is as follows :  </p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">"#actor navigates to #url"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre>
<p>There isn't really a straightforward using search/replace to accomplish this task as it requires the original string passed to the annotation to be cut from its original location and appended to the return statement. 
Be sure to replace the actor placeholder <code>{0}</code> with <code>#actor</code> in the final string. You will also have to remove the step import as well:  </p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> step <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/core/lib/recording"</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="simplifying-tasks-using-taskwhere">Simplifying Tasks using Task.where</h3>
<p>Serenity/JS 2.x now has factory for creating tasks by means of <a href="https://serenity-js.org/modules/core/class/src/screenplay/Task.ts~Task.html#static-method-where">Task.where</a>. 
For instance here is a re-written version of the <code>NavigateToNonAngular</code> example <code>Task</code> described in the previous section:</p>
<pre class="language-javascript"><code class="language-javascript">Task<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">#actor navigates to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    UseAngular<span class="token punctuation">.</span><span class="token function">disableSynchronisation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Open<span class="token punctuation">.</span><span class="token function">browserOn</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre>
<p>The benefit of <code>Task.where</code> is that it allows sequences of tasks to be defined in-line along with the task description without having to declare a concrete class. 
Whilst this syntax was available in Serenity/JS 1.x, but it may be worth re-writing old concrete tasks to the <code>Task.where</code> syntax whilst you are replacing your step annotations as it will result in more maintainable code with less 'boilerplate.'</p>
<h3 id="alert-handling">Alert handling</h3>
<p>Alert handling tasks have been brought inline with the new Wait API which uses the form <code>Wait.until(&lt;Anwserable&gt;, &lt;expectation&gt;)</code>. So if you've got any alert tasks in your project you'll have to make the following changes:</p>
<table>
<thead>
<tr>
<th>from</th>
<th>to</th>
</tr>
</thead>
<tbody><tr>
<td>WaitForAlert.toBePresent()</td>
<td>Wait.until(Alert.visibility(), equals(true))</td>
</tr>
<tr>
<td>WaitForAlert.toBeAbsent()</td>
<td>Wait.until(Alert.visibility(), equals(false))</td>
</tr>
</tbody></table>
<h4 id="alert-related-imports">Alert related imports</h4>
<p>These can be removed</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Alert <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"serenity-js/lib/serenity-protractor/screenplay/interactions/alert"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> WaitForAlert <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"serenity-js/lib/serenity-protractor/screenplay/interactions/waitForAlert"</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="migrating-assertions">Migrating Assertions</h2>
<h3 id="chai">chai</h3>
<p>If you previously had a chai configuration class in your project you can delete / deference this as this will no longer be needed. </p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> chai <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"chai"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> chaiAsPromised <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"chai-as-promised"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

chai<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>chaiAsPromised<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> expect <span class="token operator">=</span> chai<span class="token punctuation">.</span>expect<span class="token punctuation">;</span>
</code></pre>
<h3 id="migrating-seeif-to-ensurethat">Migrating See.if to Ensure.that</h3>
<p>Serenity/JS 2.x now has a completely rewritten <a href="https://serenity-js.org/modules/assertions/">assertions</a> library. 
in Serenity/JS 1.x the entry point to an assertion was <code>See.if</code>, however the new assertion syntax now begins with <a href="https://serenity-js.org/modules/assertions/class/src/Ensure.ts~Ensure.html">Ensure.that</a>.<br>All assertions and expectations can be found in <code>@serenity-js/assertions</code>, so you'll typically see all imports grouped together as follows: </p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> Expectation<span class="token punctuation">,</span> Ensure<span class="token punctuation">,</span> and<span class="token punctuation">,</span> or<span class="token punctuation">,</span> isGreaterThan<span class="token punctuation">,</span> isLessThan<span class="token punctuation">,</span> equals<span class="token punctuation">,</span> not <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/assertions"</span><span class="token punctuation">;</span>
</code></pre>
<p>Some examples of how the 1.x syntax can be migrated to the the 2.x syntax are as follows:</p>
<table>
<thead>
<tr>
<th>from</th>
<th>to</th>
</tr>
</thead>
<tbody><tr>
<td>See.if(WalksAndEventsManagerQuestions.LoginStatus, equals("Login"))</td>
<td>Ensure.that(WalksAndEventsManagerQuestions.LoginStatus, equals("Login"))</td>
</tr>
<tr>
<td>Wait.upTo(Duration.ofSeconds(10)).until(WalksTargets.chatWindow, Is.invisible())</td>
<td>Wait.upTo(Duration.ofSeconds(10)).until(WalksTargets.chatWindow, not(isVisible()))</td>
</tr>
</tbody></table>
<h3 id="is-no-longer-is--">Is no longer "Is" :-)</h3>
<p>The <code>Is</code> class from 1.x has now been replaced with <a href="https://github.com/jan-molak/serenity-js/tree/master/packages/protractor/src/expectations">expectations</a> that can be used with both Wait and Ensure. <code>Is</code> was previously in <code>serenity-js/lib/serenity-protractor</code>, but now <a href="https://github.com/jan-molak/serenity-js/tree/master/packages/protractor/src/expectations">expectations</a> can be found in <code>@serenity-js/protractor</code>. Some examples of replacements that might need to be made are as follows:</p>
<table>
<thead>
<tr>
<th>from</th>
<th>to</th>
</tr>
</thead>
<tbody><tr>
<td>Is.clickable()</td>
<td>isClickable()</td>
</tr>
<tr>
<td>Is.enabled()</td>
<td>isEnabled()</td>
</tr>
<tr>
<td>Is.present()</td>
<td>isPresent()</td>
</tr>
<tr>
<td>Is.selected()</td>
<td>isSelected()</td>
</tr>
<tr>
<td>Is.visible()</td>
<td>isVisible()</td>
</tr>
</tbody></table>
<p>A full reference of the API can be found in the <a href="https://serenity-js.org/modules/protractor/identifiers.html#expectations">expectations documentation</a>.</p>
<h2 id="migrating-questions">Migrating Questions</h2>
<p>The method signature for the <code>answeredBy()</code> method has changed in that the <code>PerformsTasks</code> ability has now been renamed to  <code>AnswersQuestions</code>,
so you will need to globally replace <code>PerformsTasks</code> with <code>AnswersQuestions</code> in your entire codebase. This is pretty straightforward as the import is still from <code>@serenity-js/core/lib/screenplay</code>.</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">answeredBy</span><span class="token punctuation">(</span>actor<span class="token operator">:</span> PerformsTasks <span class="token operator">&amp;</span> UsesAbilities<span class="token punctuation">)</span><span class="token operator">:</span> 
</code></pre>
<pre class="language-javascript"><code class="language-javascript"><span class="token function">answeredBy</span><span class="token punctuation">(</span>actor<span class="token operator">:</span> PerformsActivities <span class="token operator">&amp;</span> AnswersQuestions <span class="token operator">&amp;</span> UsesAbilities<span class="token punctuation">)</span><span class="token operator">:</span>
</code></pre>
<h2 id="migrating-script-execution-tasks">Migrating Script Execution Tasks</h2>
<p>There are some cases when you may wish to perform a low level page interaction that cannot be accomplished by means of the standard protractor API. 
Under these circumstances you are able to execute javascript directly in the browser. 
In Serenity/JS 1.x this was achieved by passing the script and any arguments to the <code>executeScript</code> method of the <code>BrowseTheWeb</code> ability.</p>
<p>Serenity/JS 2.x offers more flexibility for executing scripts by means of the <code>ExecuteScript</code> <code>Interaction</code>.  </p>
<p>This approach is perhaps better demonstrated by means of a relatively simple example <code>Task</code> called <code>Hide</code> which takes a <code>Target</code> as an argument which represents the element on the page we wish to hide. 
The purpose of the <code>Task</code> is to first determine whether the element is present on the page and if so, hide the element using javascript. 
This might be used in cases where a floating window is overlaying another element that you wish to interact with and the presence of the floating window is sometimes causing an <code>ElementClickInterceptedException</code> to be thrown resulting in your test failing or being 
<a href="https://testing.googleblog.com/2016/05/flaky-tests-at-google-and-how-we.html">flaky</a>.</p>
<p>The code for <code>Hide</code> is now shown using both Serenity/JS 1.x and Serenity/JS 2.x implementations:</p>
<h3 id="serenityjs-1x-implementation-of-hide-task">Serenity/JS 1.x implementation of Hide Task</h3>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> PerformsTasks<span class="token punctuation">,</span> Task<span class="token punctuation">,</span> UsesAbilities <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"serenity-js/lib/screenplay"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowseTheWeb<span class="token punctuation">,</span> Target <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"serenity-js/lib/serenity-protractor"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Hide</span> <span class="token keyword">implements</span> <span class="token class-name">Task</span> <span class="token punctuation">{</span>

    <span class="token keyword">static</span> <span class="token function">target</span><span class="token punctuation">(</span>target<span class="token operator">:</span> Target<span class="token punctuation">)</span><span class="token operator">:</span> Task <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Hide</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">private</span> <span class="token literal-property property">target</span><span class="token operator">:</span> Target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                                                            <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">performAs</span><span class="token punctuation">(</span>actor<span class="token operator">:</span> PerformsTasks <span class="token operator">&amp;</span> UsesAbilities<span class="token punctuation">)</span><span class="token operator">:</span> PromiseLike<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> browseTheWeb <span class="token operator">=</span> BrowseTheWeb<span class="token punctuation">.</span><span class="token function">as</span><span class="token punctuation">(</span>actor<span class="token punctuation">)</span><span class="token punctuation">;</span>                                                 <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> element <span class="token operator">=</span> browseTheWeb<span class="token punctuation">.</span><span class="token function">locate</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>                                            <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> element<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">present</span> <span class="token operator">=&gt;</span>                                                                            <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
          present <span class="token operator">&amp;&amp;</span> browseTheWeb<span class="token punctuation">.</span><span class="token function">executeScript</span><span class="token punctuation">(</span><span class="token string">"arguments[0].style.visibility='hidden'"</span><span class="token punctuation">,</span> element<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>In the example above:</p>
<ol>
<li>the <code>Target</code> was passed in the constructor.</li>
<li>the <code>BrowseTheWeb</code> ability was extracted to a local variable as it will be used more than once in the function body.</li>
<li>a <code>WebElement</code>is resolved by passing the <code>Target</code> to the <code>locate</code> method.</li>
<li>the <code>isPresent()</code> method is called on the <code>WebElement</code> and a <code>present</code> value is extracted in the <code>Promise</code> <code>then</code> block.</li>
<li>if the <code>present</code> value is <code>true</code> the <code>executeScript</code> method is executed. Two arguments are passed: <ul>
<li>the script text </li>
<li>the web element</li>
</ul>
</li>
</ol>
<h3 id="serenityjs-2x-implementation-of-hide-task">Serenity/JS 2.x implementation of Hide Task</h3>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> AnswersQuestions<span class="token punctuation">,</span> PerformsActivities<span class="token punctuation">,</span> Question<span class="token punctuation">,</span> Task<span class="token punctuation">,</span> UsesAbilities <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/core"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ExecuteScript <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/protractor"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> promiseOf <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@serenity-js/protractor/lib/promiseOf"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ElementFinder <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"protractor"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">Hide</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">target</span><span class="token operator">:</span> Question<span class="token operator">&lt;</span>ElementFinder<span class="token operator">&gt;</span> <span class="token operator">|</span> ElementFinder</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>                              <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    Task<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">#actor hides </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> target <span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        Check<span class="token punctuation">.</span><span class="token function">whether</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                                                            <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">andIfSo</span><span class="token punctuation">(</span>                                                                                 
                ExecuteScript<span class="token punctuation">.</span><span class="token function">sync</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">arguments[0].style.visibility='hidden'</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>                          <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withArguments</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span>                                                               <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
</code></pre>
<p>In the example above:</p>
<ol>
<li>the <code>target</code> argument of type <code>Question&lt;ElementFinder&gt; | ElementFinder</code> is now passed in the constructor.</li>
<li>the <code>Check</code> task is invoked with the <code>target</code> and <code>isPresent</code> <code>Expectation</code> passed to it. </li>
<li>if the <code>Check</code> task returns <code>true</code> the actor performs the <code>ExecuteScript</code> task, passing the script to the <code>sync</code> method.</li>
<li>the <code>target</code> is passed to the <code>withArguments</code> method which then executes the script and after converting the <code>target</code> to a <code>WebElement</code>.</li>
</ol>
</body></html>
                        </section>


                        <footer class="d-print-none">
                        </footer>
                    </article>
                </div>
            </div>
        </div>
    </section>

</section>

<footer id="footer" class="ftr ftr-accent-2 text-center">
    <div class="container ftr-columns d-print-none">
        <div class="row">
            <div class="col-md-2 ml-auto col-sm-4">
                <h5 class="ftr-column-title ">Get started</h5>
                <ul class="ftr-column-list">
                    <li><a href="/handbook/">Serenity/JS Handbook</a></li>
                    <li><a href="/modules/">API docs</a></li>
                    <li><a href="https://github.com/serenity-js">Template projects</a></li>
                    <li><a href="https://github.com/serenity-js/serenity-js/tree/master/examples">Examples</a></li>
                </ul>
            </div>
            <div class="col-md-2 col-sm-4">
                <h5 class="ftr-column-title ">Support</h5>
                <ul class="ftr-column-list">
                    <li><a href="/support.html">Free Support</a></li>
                    <li><a href="/support.html#training-and-support-services">Training</a></li>
                    <li><a href="/support.html#training-and-support-services">Commercial support</a></li>
                    <li><a href="/community/sponsors.html">Serenity/JS Sponsors</a></li>
                    <li><a href="https://gitter.im/serenity-js/Lobby">Community Chat</a></li>
                </ul>
            </div>
            <div class="col-md-2 mr-auto col-sm-4">
                <h5 class="ftr-column-title">Developers</h5>
                <ul class="ftr-column-list">
                    <li><a href="/contributing.html">Contribute</a></li>
                    <li><a href="/changelog.html">Changelog</a></li>
                    <li><a href="/license.html">License</a></li>
                </ul>
            </div>
        </div>
        <div class="col-lg-6 mx-auto">
            <div class="ftr-column-list">
                <a class="github-button" href="https://github.com/sponsors/serenity-js" data-icon="octicon-heart" data-size="large" aria-label="Sponsor Serenity/JS on GitHub">Sponsor</a>
                <a class="github-button" href="https://github.com/serenity-js/serenity-js" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star jan-molak/serenity-js on GitHub">Star</a>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-lg-6 mx-auto ftr-bt ftr-oneline ">
                Made with love in London, UK &copy; 2016 - 2022 <a href="https://janmolak.com" target="_blank">Jan Molak</a>, smartcode ltd.
            </div>
        </div>
    </div>
</footer>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"
        integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js"
        integrity="sha256-m1eTvwEHwmsw4+XKF7BshClVJEPwTVycveNl0CS0Mkk="
        crossorigin="anonymous"></script>
<!-- Place this tag in your head or just before your close body tag. -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

<script src="/js/charming-pro.js"></script>

<script src="/js/search_index_initialiser.js"></script>
<script src="/js/inherited-summary.js"></script>
<script src="/js/test-summary.js"></script>
<script src="/js/patch-for-local.js"></script>
<script src="/js/external-links.js"></script>

<script>
    anchors.add('article h1, article h2, article h3, article h4');
</script>

<script type="text/javascript" id="cookieinfo"
        src="//cookieinfoscript.com/js/cookieinfo.min.js"
        data-message="We use analytical cookies to optimise the performance of this website. By continuing to use this site you agree to help us make it better for everyone."
        data-close-text="Got it!"
>
</script>

<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
    mermaid.initialize({
        startOnLoad: true,
        securityLevel: 'loose',
        // theme: 'default',
        flowchart: {
            useMaxWidth: true,
            htmlLabels: true,
        },
        themeVariables: {
            // primaryColor: '#ffffff',
            // primaryBorderColor: '#373a3c',
            fontFamily: '"SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace !important',
            defaultLinkColor: '#c1c1ff',
            edgeLabelBackground: '#fff',
        }
    });
</script>
</body>
</html>
